<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<title>多汇供应链管理有限公司</title>
<meta name="keywords" content="多汇供应链管理有限公司">
<meta name="description" content="多汇供应链管理有限公司">
<link th:href="@{/duohui/denglu/css/base1.css}" rel="stylesheet" type="text/css">
<link th:href="@{/duohui/denglu/css/main_001.css}" rel="stylesheet" type="text/css">
<script th:src="@{/duohui/denglu/js/jquery-1.js}" type="text/javascript"></script>
<script th:src="@{/duohui/denglu/js/public.js}" type="text/javascript"></script>
<script th:src="@{/duohui/denglu/js/entreg.js}" type="text/javascript"></script>
<script type="text/javascript">        var _curWeb = "news";</script>
<!--下面是大图，上面是导航-->
</head>
<body>
<div class="header ">
  <div th:replace="/duohui/chanpin/include/headerTop :: header_top"></div>
  <div th:replace="/duohui/denglu/include/header :: header"></div>
  <div th:replace="/duohui/denglu/include/menu :: menu"></div>
</div>

<!--注册内容-->

<div class="box"  style="margin:30px auto; width:880px; border:1px solid #e5e5e5;">
  <script>
		$(function () {
			var f = $('form#fMain');

			$('.tb a').click(function () {
				$('.tb a').removeClass('act');
				var e = $(this);
				e.addClass('act');
				if (e.attr('val') == 'p') {
					f.find('input[name=t]').val('p');
					$('li#cname').hide();
					$('li#pname').show();
					$("#userType").val("personType");
				}

			else{
					f.find('input[name=t]').val('c');
					$('li#pname').hide();
					$('li#cname').show();
                  $("#userType").val("companyType");
				}

				return false;
			});
			$('.tb').find('a[val=' + f.find('input[name=t]').val() + ']').click();
		});
	</script>
  <form id="fMain" method="post" onSubmit="return false;">
    <input type="hidden" id="userType" value="companyType"/>
    <div class="gtform">
      <li>
        <label class="fl"></label>
        <em style="display:inline-block;">
        <p class="tb"> <a href="#" val="p" class="act">企业会员</a> <a href="#" val="c">个人会员</a></p>
        </em> </li>
      <li  class="clear clearfix">
        <label class="fl" >手机号码<i class=" line36  ml5 mr10 red">*</i></label>
        <em>
        <input type="text" name="username" id="username" maxlength="64" class="it" />
        </em> </li>
      <li >
        <label class="fl">验证码<i class=" line36  ml5 mr10 red">*</i></label>
        <em>
        <input type="text" name="vc" size="5" maxlength="5" class="it" style="width:100px;" verifycode="" placeholder="验证码">
        <img th:src="@{/duohui/denglu/images/captcha.png.png}" verifycode=""></em> </li>
      <li class="clear clearfix">
        <label class="fl" >手机验证码<i class=" line36  ml5 mr10 red">*</i></label>
        <em>
        <input type="text" name="captcha" maxlength="64"  style="width:210px;" class="it" value="" />
        <div class="send">
          <input class="huoqu" type="button" value="获取短信验证码">
        </div>
        </em> </li>
      <li>
        <label class="fl">登录密码<i class=" line36  ml5 mr10 red">*</i></label>
        <em>
        <input type="password" name="password" maxlength="64" class="it" value="" />
        </em> </li>
      <li>
        <label class="fl">重复输入密码<i class=" line36  ml5 mr10 red">*</i></label>
        <em>
        <input type="password" name="confirmPassword" maxlength="128" value=""  class="it" />
        </em> </li>
      <li id="cname" style="display: none">
        <label class="fl">个人类型<i class=" line36  ml5 mr10 red">*</i></label>
        <em>
        <label>
          <select class="una-select it" style="color:#444; width:230px;"
                  lay-verify="required"
                  name="personTypeDcode"
                  lay-search=""
                  data-param_name="parentCode"
                  data-param_value="industry"
                  data-option_value_field_title="code"
                  data-url="/api/sys/dictionary"></select>
        </label>
        </em> </li>
      <li  id="pname">
        <label class="fl">公司名称<i class=" line36  ml5 mr10 red">*</i></label>
        <em>
        <input type="password" name="companyName" maxlength="128" value=""  class="it" />
        </em> </li>
      <li id="pname" >
        <label class="fl">公司类型<i class=" line36  ml5 mr10 red">*</i></label>
        <em>
        <label>
          <select class="una-select it" style="color:#444; width:230px;"
                  lay-verify="required"
                  name="companyTypeDcode"
                  lay-search=""
                  data-param_name="parentCode"
                  data-param_value="industry"
                  data-option_value_field_title="code"
                  data-url="/api/sys/dictionary"></select>
        </label>
        </em> </li>
      <li  id="pname">
        <label class="fl">所在地区：</label>
        <em>
        <label class="aa">
          <select class="una-select una-select-linkage it" style="color:#444;"
                  lay-verify="required"
                  lay-search=""
                  data-param_name="level"
                  data-param_value="2"
                  data-sub_id="regionCity"
                  data-option_value_field_title="id"
                  data-url="/api/sys/region"></select>
          <select class="una-select una-select-linkage it" style="color:#444;"
                  id="regionCity"
                  lay-verify="required"
                  lay-search=""
                  data-param_name="parentId"
                  data-sub_id="regionArea"
                  data-option_value_field_title="id"
                  data-url="/api/sys/region"></select>
          <select class="una-select it" style="color:#444;"
                  id="regionArea"
                  name="regionId"
                  lay-verify="required"
                  lay-search=""
                  data-param_name="parentId"
                  data-option_value_field_title="id"
                  data-url="/api/sys/region"></select>
        </label>
        </em> </li>
      <li>
        <label class="fl"></label>
        <em>
        <input type="checkbox" name="statement" value="true" class="g_vm fl mr10" id="isRead"/>
        <b style=" float:left; display:inline-block;height:30px;">已经阅读并同意 <a href="" target="_blank">多汇供应链管理注册协议</a></b> </em> </li>
      <li>
        <label class="fl"></label>
        <em>
        <input type="submit" onclick="register(this)" value="注册" class="btn" />
        </em> </li>
      <li>
        <label class="fl"></label>
        <em>已有账号？ <a href="/api/duohui/login/toLogin">立即登录</a></em> </li>
    </div>
  </form>
</div>
<div th:replace="/duohui/chanpin/include/footer :: footer"></div>
<script th:src="@{/layui/layui.all.js}" charset="utf-8"></script>
<script th:src="@{/xadmin/js/xadmin.js}" type="text/javascript"></script>
<script th:src="@{/xadmin/js/jquery.min.js}" type="text/javascript"></script>
<script th:src="@{/una/js/private/una.common.js}" charset="utf-8"></script>
<script th:src="@{/una/js/private/una.validation.js}" charset="utf-8"></script>
<script type="text/javascript">
  var form = $("#fMain");

  function register(selector){
    $(selector).attr("disabled",true);

    if($("#"))

    $.ajax({
      url: '/api/sys/account/register',
      type: "POST",
      data: form.serialize(),
      dataType: 'json',
      success:function(result){
        if(result.isSuccess){
          layer.msg(result.message);
          localStorage.setItem("token",result.data);
          setTimeout(function () {
            window.location.href="/api/duohui/chanpin/index";
          },'500')

        }else{
          //登录失败，刷新验证码
          form.find("input[name=captcha]").val("");
          form.find(".captchaImage").click();
          layer.msg(result.message,function () {})
        }

      }
    })
  }

  $(document).keydown(function (event) {
    if (event.keyCode == 13) {//回车键对应code值为13
      login($("#loginForm"));
    }
  });

  //点击刷新图片
  $('.captchaImage').click(function(){
    $(this).attr("src", "/una/sys/captcha/showCaptcha?sessionName=sysLoginCaptcha&timestamp="+ (new Date()).valueOf());
  });

</script>
</body>
</html>
